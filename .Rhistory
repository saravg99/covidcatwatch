Sys.which("make")
install.packages("jsonlite", type = "source")
install.packages("glue")
install.packages("glue")
install.packages("glue")
install.packages("glue")
install.packages("glue")
knitr::opts_chunk$set(echo = TRUE)
summary(cars)
knitr::opts_chunk$set(echo = TRUE)
summary(cars)
plot(pressure)
library()
sesionInfo()
sessionInfo()
typeof(1)
class(1)
x <- 3
ls()
rm(x)
v <- c(1,2,3,4,5)
x <- 4:10
a <- 4L
rm(a)
a <- 4 L
a <- 4l
a <- 4L
typeof(a)
lenght(v)
length(v)
v[3]
x <- manola
names(v) <- c
names(v) <- c("manola", "pepita", "juana", "antonio", "paco")
v(pepita)
v[pepita]
v["pepita"]
v
f <- 1:12
matrix(f, nrow = 3)
m <- matrix(f, nrow = 3)
dim(m)
rm(*)
rm()
rm(all)
help
help(rm)
clean
celar
clear
l <- list(numero=2)
l
l <- list(numero=2, color="rojo")
l
l <- list(numero=2, color="rojo", color="azul")
l
l <- list(numero=2, color=l("rojo","azul"))
l <- list(numero=2, color=c("rojo","azul"))
ls
ls
l
ls()
l
list$color
l$color
help.search("objects")
getwd
getwd()
setwd(..)
setwd(/..)
setwd(../)
setwd(C:/Users/sarav)
setwd("C:/Users/sarav")
getwd()
setwd("~/")
knitr::opts_chunk$set(echo = TRUE)
admision <- read.csv("admision_rates.csv", sep=",")
reported <- read.csv("reported_cases.csv", sep=",")
admision_date <- as.Date(admision$date)
admision_year <- format(admision_date, "%Y") #extract the year
year_mask <- admision_year == 2020
admision_2020 <- admision[year_mask, ]
hospital_mask <- admision_2020$indicator == "Daily hospital occupancy"
admision_hospital <- admision_2020[hospital_mask,]
ICU_mask <- admision_2020$indicator == "Daily ICU occupancy"
admision_ICU <- admision_2020[ICU_mask,]
months <- months(admision_date_2020, abbreviate = TRUE)
admision_date_2020 <- as.Date(admision_2020$date)
months <- months(admision_date_2020, abbreviate = TRUE)
Sys.setlocale("LC.TIME", "C")
Sys.setlocale("LC_TIME", "C")
months <- months(admision_date_2020, abbreviate = TRUE)
summary months
summary(months)
factor <- factor(months)
summary(factor)
admision_date_2020
View(admision_2020)
admision_date_2020 <- as.Date(admision_2020$date)
Sys.setlocale("LC_TIME", "C")
admision_months_2020 <- factor(months(admision_date_2020, abbreviate = TRUE), labels = c("Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"))
admision_date_2020 <- as.Date(admision_2020$date)
Sys.setlocale("LC_TIME", "C")
admision_months_2020 <- factor(months(admision_date_2020, abbreviate = TRUE), levels = c("Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"))
admision_date_2020 <- as.Date(admision_2020$date)
Sys.setlocale("LC_TIME", "C")
admision_months_2020 <- factor(months(admision_date_2020, abbreviate = TRUE), levels = c("Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"))
admision_date_2020 <- as.Date(admision_2020$date)
Sys.setlocale("LC_TIME", "C")
admision_months_2020 <- factor(months(admision_date_2020, abbreviate = TRUE), levels = c("Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"))
Sys.setlocale("LC_TIME", "C")
admision_date_2020 <- as.Date(admision_2020$date)
admision_months_2020 <- factor(months(admision_date_2020, abbreviate = TRUE), levels = c("Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"))
admision_hospital_values
admision:hospital_date <- as.Date(admision_hospital$date)
admision_hospital_date <- as.Date(admision_hospital$date)
months <- c("Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec")
admision_hospital_date <- as.Date(admision_hospital$date)
admision_hospital_months <- factor(months(admision_hospital_date, abbreviate = TRUE), levels = months )
admision_hospital_values <- split(admision_hospital$value, admision_hospital_months)
admision_hospital_values
sapply(admision_hospital_months, mean)
sapply(admision_hospital_values, mean)
sapply(admision_hospital_months, mean(na.rm=TRUE))
sapply(admision_hospital_months, mean, na.rm=TRUE)
sapply(admision_hospital_values, mean, na.rm=TRUE)
droplevels(admision_hospital_values)
admision_hospital_values
sapply(admision_hospital_values, mean, na.rm=TRUE)
class(sapply(admision_hospital_values, mean, na.rm=TRUE))
admision_hospital_date <- as.Date(admision_hospital$date)
months <- c("Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec")
admision_hospital_date <- as.Date(admision_hospital$date)
admision_hospital_months <- factor(months(admision_hospital_date, abbreviate = TRUE), levels = months )
admision_hospital_values <- split(admision_hospital$value, admision_hospital_months)
admision_hospital_mean <- sapply(admision_hospital_values, mean, na.rm=TRUE)
plot(months, admision_hospital_mean)
plot(admision_hospital_months)
plot(admision_hospital_months, type="l")
plot.default(admision_hospital_mean)
plot(admision_hospital_mean)
plot(admision_hospital_mean, type = "l")
admision_hospital_mean
plot(admision_hospital_mean, type = "l", col="red")
View(reported)
year_mask2 <- reported$year == 2020
reported_2020 <- reported[year_mask2, ]
View(reported_2020)
continent_mask <- reported_2020$continentExp == Europe
continent_mask <- reported_2020$continentExp == "Europe"
reported_2020_Europe <- reported_2020[continent_mask, ]
View(reported_2020_Europe)
countries <- factor(admision_hospital$ï..country)
countries <- levels(factor(admision_hospital$ï..country))
countries
country_mask <- reported_2020$countriesAndTerritories == countries
country_mask <- reported_2020$countriesAndTerritories %in% countries
reported_2020_countries <- reported_2020[country_mask, ]
View(reported_2020_countries)
countries <- levels(factor(admision_2020$ï..country))
country_mask <- reported_2020$countriesAndTerritories %in% countries
reported_2020_countries <- reported_2020[country_mask, ]
months <- c("Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec")
admision_hospital_date <- as.Date(admision_hospital$date)
admision_hospital_months <- factor(months(admision_hospital_date, abbreviate = TRUE), levels = months )
admision_hospital_values <- split(admision_hospital$value, admision_hospital_months)
admision_hospital_mean <- sapply(admision_hospital_values, mean, na.rm=TRUE)
admision_ICU_date <- as.Date(admision_ICU$date)
admision_ICU_months <- factor(months(admision_ICU_date, abbreviate = TRUE), levels = months )
admision_ICU_values <- split(admision_ICU$value, admision_ICU_months)
admision_ICU_mean <- sapply(admision_ICU_values, mean, na.rm=TRUE)
reported_date <- as.Date(reported_2020_countries$date)
reported_months <- factor(months(reported_date, abbreviate = TRUE), levels = months )
reported_values <- split(reported_2020_countries$cases, reported_months)
reported_mean <- sapply(reported_values, mean, na.rm=TRUE)
plot(admision_hospital_mean, type = "l", col="blue")
lines(admision_ICU_mean, col="red")
lines(reported_mean)
plot(admision_hospital_mean, type = "l", col="blue")
lines(admision_ICU_mean, col="red")
lines(reported_mean)
plot(admision_hospital_values)
plot(admision_hospital_mean, type = "l", col="blue")
lines(admision_ICU_mean, col="red")
lines(reported_mean)
plot(admision_hospital_values, months)
plot(admision_hospital_mean, type = "l", col="blue")
lines(admision_ICU_mean, col="red")
lines(reported_mean)
plot(admision_hospital$value, admision_hospital_months)
plot(admision_hospital_mean, type = "l", col="blue")
lines(admision_ICU_mean, col="red")
lines(reported_mean)
plot(admision_hospital_months~admision_hospital$value, )
plot(admision_hospital_mean, type = "l", col="blue")
lines(admision_ICU_mean, col="red")
lines(reported_mean)
plot(admision_hospital_months~admision_hospital$value)
plot(admision_hospital_mean, type = "l", col="blue", xlab = "months", ylab = "")
lines(admision_ICU_mean, col="red")
lines(reported_mean)
plot(admision_hospital_mean, type = "l", col="blue", xlab = "months", ylab = "")
lines(admision_ICU_mean, col="red")
lines(reported_mean)
legend(1, 95, legend=c("Reporded Cases", "Hospital admisions", "ICU admisions"),
col=c("black", "blue", "black"))
plot(admision_hospital_mean, type = "l", col="blue", xlab = "months", ylab = "")
lines(admision_ICU_mean, col="red")
lines(reported_mean)
legend(1, 6000, legend=c("Reporded Cases", "Hospital admisions", "ICU admisions"),
col=c("black", "blue", "black"))
plot(admision_hospital_mean, type = "l", col="blue", xlab = "months", ylab = "")
lines(admision_ICU_mean, col="red")
lines(reported_mean)
legend(1, 6000, legend=c("Reporded Cases", "Hospital admisions", "ICU admisions"), fill = c("black", "blue", "black"))
plot(admision_hospital_mean, type = "l", col="blue", xlab = "months", ylab = "")
lines(admision_ICU_mean, col="red")
lines(reported_mean)
legend(1, 6000, legend=c("Reported Cases", "Hospital admisions", "ICU admisions"), fill = c("black", "blue", "red"))
install.packages("twitteR")
install.packages("twitteR")
source("C:/Users/sarav/Documents/SARA/TFG/Twitterbot/twitterbot.R")
library(ggplot2)
diamonds
ggplot(diamonds, aes(x=carat, y=price, color=cut, shape=color)) + geom_point()
ggplot(diamonds, aes(x=carat, y=price, color=cut, shape=color)) + geom_point()
gg <- ggplot(diamonds, aes(x=carat, y=price, color=cut)) + geom_point() + labs(title="Scatterplot", x="Carat", y="Price")  # add axis lables and plot title.
print(gg)
gg1 <- gg + theme(plot.title=element_text(size=30, face="bold"),
axis.text.x=element_text(size=15),
axis.text.y=element_text(size=15),
axis.title.x=element_text(size=25),
axis.title.y=element_text(size=25)) +
scale_color_discrete(name="Cut of diamonds")  # add title and axis text, change legend title.
print(gg1)  # print the plot
gg1 + facet_wrap( ~ cut, ncol=3)
gg1 + facet_wrap( ~ cut, ncol=2)
gg1 + facet_wrap( ~ cut)
gg1 + facet_wrap( color ~ cut)
gg1 + facet_wrap(color ~ cut)
gg1 + facet_wrap(color ~ cut)
library(ggfortify)
library(dadescovidcomarques)
tweet <- make_tweet("BAIX LLOBREGAT", 834653)
clear()
setwd("~/SARA/TFG/Twitterbot/")
comarquesdiari <- read.csv("comarques_diari.csv", sep=';', stringsAsFactors=TRUE)
bllobregatdiarimask <- comarquesdiari$NOM == "BAIX LLOBREGAT"
bllobregatdiari <- comarquesdiari[bllobregatdiarimask, ]
#bllobregatsetmask <- comarquesset$NOM == "BAIX LLOBREGAT"
#bllobregatset <- comarquesset[bllobregatsetmask, ]
##dades de la poblacio general
generalmask <- bllobregatdiari$RESIDENCIA == "No"
bllobregatdiarigen <- bllobregatdiari[generalmask, ]
View(bllobregatdiarigen)
dates <- as.Date(bllobregatdiarigen$DATA)
years <- format(dates, "%Y")
years
year_mask <- years == 2021
bllobregatgen2021 <- bllobregatdiarigen[year_mask, ]
View(bllobregatgen2021)
casosconf <- split(bllobregatgen2021$CASOS_CONFIRMAT, bllobregatgen2021$DATA)
head(casosconf)
bllobregatgen2021$DATA
casosconf <- split(bllobregatgen2021$CASOS_CONFIRMAT, bllobregatgen2021$DATA)
casosconf
tail(bllobregatgen2021$DATA)
dates <- as.Date(bllobregatdiarigen$DATA)
years <- format(dates, "%Y")
tail(years)
years
year_mask <- years == "2021"
bllobregatgen2021 <- bllobregatdiarigen[year_mask, ]
bllobregatgen2021$DATA
droplevels(bllobregatgen2021$DATA)
casosconf <- dropleves(split(bllobregatgen2021$CASOS_CONFIRMAT, bllobregatgen2021$DATA))
casosconf <- droplevels(split(bllobregatgen2021$CASOS_CONFIRMAT, bllobregatgen2021$DATA))
casosconf <- split(bllobregatgen2021$CASOS_CONFIRMAT, droplevels(bllobregatgen2021$DATA))
casosconf
casosconfsum <- lapply(casosconf, sum)
data.frame(casosconfsum)
data.frame(HOLA=c(1, 2, 3), HEY=c(5, 6, 7))
casosconf2021 <- data.frame(DATA=as.Date(names(casosconfsum)), CASOS=casosconfsum)
View(casosconf2021)
casosconf2021 <- data.frame(DATA=as.Date(names(casosconfsum)), CASOS=unlist(casosconfsum))
View(casosconf2021)
ggplot(casosconf2021, aes(x=DATA, y=CASOS)) + geom_line()
vacunats1 <- split(bllobregatdiarigen$VACUNATS_DOSI_1, bllobregatdiarigen$DATA)
vacunats1
head(vacunats1)
vacunats1 <- split(bllobregatgen2021$VACUNATS_DOSI_1, bllobregatgen2021$DATA)
head(vacunats1)
vacunats1 <- split(bllobregatgen2021$VACUNATS_DOSI_1, droplevels(bllobregatgen2021$DATA)
)
head(vacunats1)
vacunats1 <- split(bllobregatgen2021$VACUNATS_DOSI_1, bllobregatgen2021$DATA)
lapply(vacunats1, sum)
filter(lapply(vacunats1, sum), !=0)
filter(lapply(vacunats1, sum), lapply(vacunats1, sum)!=0)
vacunats1 <- split(bllobregatgen2021$VACUNATS_DOSI_1, droplevels(bllobregatgen2021$DATA)
)
vacunats1sum <- lapply(vacunats1, cumsum)
vacunats1sum
vacunats1sum <- lapply(vacunats1, sum)
vacunats1sum
vacunats1data <- data.frame(DATA=as.Date(names(vacunats1sum)), VACUNATS_DOSI_1=unlist(vacunats1sum))
View(vacunats1data)
vacunats1data$VACUNATS_DOSI_1 <- cumsum(vacunats1data$VACUNATS_DOSI_1)
ggplot(vacunats1data, aes(x=DATA, y=VACUNATS_DOSI_1)) + geom_line()
history()
##log
line <- paste( as.character(Sys.time()), tweet, " ", sep="\n" )
source('~/SARA/TFG/Twitterbot/bllobregatbot.R')
source('~/SARA/TFG/Twitterbot/bllobregatbot.R')
source('~/SARA/TFG/Twitterbot/bllobregatbot.R')
dataframe <- read.csv(""https://dadescovid.cat/static/csv/comarques_diari.zip"")
dataframe <- read.csv("https://dadescovid.cat/static/csv/comarques_diari.zip)
dataframe <- read.csv("https://dadescovid.cat/static/csv/comarques_diari.zip")
dataframe <- read.csv(unzip("https://dadescovid.cat/static/csv/comarques_diari.zip"))
plot + labs(title = "Persones vacunades amb la 1a dosi al 2021", x= "Mesos", y= "Persones vacunades")
#crear el grafic
plot <- ggplot(vacunats1data, aes(x=DATA, y=VACUNATS_DOSI_1)) + geom_line()
+ labs(title = "Persones vacunades amb la 1a dosi al 2021", x= "Mesos", y= "Persones vacunades")
date_names_langs()
locale()
Sys.setlocale("LC_TIME", "catalan")
#crear el grafic
plot <- ggplot(vacunats1data, aes(x=DATA, y=VACUNATS_DOSI_1)) + geom_line()
plot = plot + labs(title = "Persones vacunades amb la 1a dosi al 2021", x= "Mesos", y= "Persones vacunades")
Sys.setlocale("LC_TIME", "catalan")
months(dates)
source('~/SARA/TFG/Twitterbot/bllobregatbot.R')
plot
source('~/SARA/TFG/Twitterbot/bllobregatbot.R')
lybrary(devtools)
library(devtools)
plot <- ggplot(vacunats1data, aes(x=DATA, y=VACUNATS_DOSI_1)) + geom_line(color="red")
plot = plot + labs(title = "Persones vacunades amb la 1a dosi al 2021 \n al Baix Llobregat", x= "Mesos", y= "Persones vacunades")
plot
#crear el grafic
plot <- ggplot(vacunats1data, aes(x=DATA, y=VACUNATS_DOSI_1)) + geom_line(color="red")
plot = plot + labs(title = "Persones vacunades amb la 1a dosi al 2021\n al Baix Llobregat", x= "Mesos", y= "Persones vacunades")
plot
#crear el grafic
plot <- ggplot(vacunats1data, aes(x=DATA, y=VACUNATS_DOSI_1)) + geom_line(color="red")
plot = plot + labs(title = "Persones vacunades amb la 1a dosi al 2021\n al Baix Llobregat", x= "Mesos", y= "Persones vacunades")
plot = plot + theme(plot.title = element_text(hjust = 0.5))
plot
setwd("dadescovidcomarques/")
document
document()
load_all(".")
load_all()
rm(list = c("make_tweet"))
document()
load_all()
setwd("..")
build(pkg = "dadescovidcomarques/")
build(pkg = "./dadescovidcomarques/")
build(pkg = ".")
setwd("dadescovidcomarques/")
build()
setwd("..")
install()
install("dadescovidcomarques_0.0.0.9000.tar.gz")
install.packages("dadescovidcomarques_0.0.0.9000.tar.gz")
plot_vacunats("BAIX LLOBREGAT")
load_all(path = "dadescovidcomarques/")
plot_vacunats("BAIX LLOBREGAT")
load_all(path = "dadescovidcomarques/")
plot_vacunats("BAIX LLOBREGAT")
source('~/SARA/TFG/Twitterbot/bllobregatbot_v2.R')
build(path = "dadescovidcomarques/")
setwd("dadescovidcomarques/")
build()
