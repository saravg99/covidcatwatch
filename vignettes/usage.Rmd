---
title: "Usage of the package covidcatwatch"
author: "Sara Vega Abellaneda"
date: "1/6/2021"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Usage of the package covidcatwatch}
  %\VignetteEngine{knitr::rmarkdown}
  \usepackage[utf8]{inputenc}
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```


### Installing the package

To install the package:
```{r eval=FALSE}
install.packages("remotes")
library(remotes)
install_github("saravg/covidcatwatch")
```

Once covidcatwatch is installed, it can be loaded as following:

```{r}
library(covidcatwatch)
```

### Usage example

The first step is downloading the data of the region we are interested in (in this example: Baix Llobregat) and storing it into a dataset. It can be done with the function `download_data()`.

```{r}
bllobregatdata <- download_data("BAIX LLOBREGAT")

```

Once the data is obtained, it can be used to create a a summary of the current day by using `make_tweet`.

```{r}
tweet <- make_tweet(bllobregatdata)

```


An optional step is making a plot with this data using the function `plot_data` and store the path of the image in an object.  

```{r fig.height = 3, fig.width = 6}
plotfile <- plot_data(bllobregatdata, save = TRUE)

```


Finally, the summary and the plot can be posted as a tweet using the function `post_tweet`. In order to make this function work, the Twitter API keys and tokens must be stored in a JSON file as following: 


```{json}
{
  "consumerKey": "XXXXXX",
  "consumerSecret": "XXXXXX",
  "accessToken": "XXXXXX",
  "accessTokenSecret": "XXXXXX"
}
```

Once this file is created, the function `post_tweet` can be used.


```{r eval=FALSE}
post_tweet(tweet, image = plotfile)

```




